<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head') %>
    <title><%= title %></title>
  </head>
  <body class="min-h-screen flex flex-col bg-gradient-to-b from-amber-50 to-white">
    <%- include('../partials/navbar') %>

    <main class="flex-1 pt-28 md:pt-32">
      <section class="py-16 px-4">
        <div class="max-w-xl mx-auto bg-white/80 backdrop-blur rounded-3xl shadow-lg p-8 space-y-6">
          <!-- Back Button -->
          <a href="/account/start" class="inline-flex items-center gap-2 text-foreground/70 hover:text-primary mb-4 text-sm transition-colors">
            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
            Back
          </a>
          <% if (status === 'missing_email') { %>
            <h1 class="text-2xl md:text-3xl font-serif text-ella-deep mb-2">
              We need your email
            </h1>
            <p class="text-gray-600 mb-4">
              Please go back and enter the email address you used with Ella Rises.
            </p>
            <a href="/account/start" class="inline-flex items-center px-5 py-2.5 rounded-full bg-ella-accent text-white font-semibold hover:bg-ella-accent/90">
              Go back
            </a>
          <% } else if (status === 'not_found') { %>
            <h1 class="text-2xl md:text-3xl font-serif text-ella-deep mb-2">
              We didn't find an account with that email
            </h1>
            <p class="text-gray-600 mb-4">
              We don't see an existing participant with
              <span class="font-semibold"><%= email %></span>.
            </p>
            <p class="text-gray-600 mb-6">
              If you're new to Ella Rises, you can create a new participant account.
            </p>
            <div class="flex flex-col sm:flex-row gap-3">
              <a
                href="/portal/auth?signup=true&email=<%= encodeURIComponent(email) %>"
                class="inline-flex items-center justify-center px-5 py-2.5 rounded-full bg-primary text-primary-foreground font-semibold hover:bg-primary/90"
              >
                Create a new account
              </a>
              <a
                href="/account/start"
                class="inline-flex items-center justify-center px-5 py-2.5 rounded-full border border-gray-300 text-gray-700 font-semibold hover:bg-gray-50"
              >
                Try a different email
              </a>
            </div>
          <% } else if (status === 'has_password') { %>
            <h1 class="text-2xl md:text-3xl font-serif text-ella-deep mb-2">
              You already have an account
            </h1>
            <p class="text-gray-600 mb-4">
              It looks like you already have login credentials with
              <span class="font-semibold"><%= email %></span>.
            </p>
            <p class="text-gray-600 mb-6">
              Please log in using your email and password. If you’re not sure of your password, contact the Ella Rises
              team for help.
            </p>
            <a
              href="/portal/auth?email=<%= encodeURIComponent(email) %>"
              class="inline-flex items-center px-5 py-2.5 rounded-full bg-ella-accent text-white font-semibold hover:bg-ella-accent/90"
            >
              Go to login
            </a>
          <% } else if (status === 'needs_password') { %>
            <h1 class="text-2xl md:text-3xl font-serif text-ella-deep mb-2">
              Check your email to create your password
            </h1>
            <p class="text-gray-600 mb-4">
              We found your participant record for
              <span class="font-semibold"><%= email %></span>, but you don't have a password set yet.
            </p>
            <p class="text-gray-600 mb-6">
              We've sent an email with a secure link to create your password. The link will expire after about an hour.
            </p>
            <p class="text-sm text-gray-500 mb-6">
              If you don't see the email after a few minutes, please check your spam or junk folder, or try again with
              a different email address.
            </p>
            <a
              href="/account/start"
              class="inline-flex items-center px-5 py-2.5 rounded-full border border-gray-300 text-gray-700 font-semibold hover:bg-gray-50"
            >
              Try a different email
            </a>
          <% } else { %>
            <h1 class="text-2xl md:text-3xl font-serif text-ella-deep mb-2">
              Something went wrong
            </h1>
            <p class="text-gray-600 mb-4">
              We’re not sure what happened. Please go back and try again.
            </p>
            <a href="/account/start" class="inline-flex items-center px-5 py-2.5 rounded-full bg-ella-accent text-white font-semibold hover:bg-ella-accent/90">
              Try again
            </a>
          <% } %>
        </div>
      </section>
    </main>

    <%- include('../partials/footer') %>
    <%- include('../partials/footer-scripts') %>
  </body>
</html>



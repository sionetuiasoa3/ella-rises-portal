<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head') %>
    <title><%= title %></title>
  </head>
  <body class="min-h-screen flex flex-col bg-gradient-to-b from-amber-50 to-white">
    <%- include('../partials/navbar') %>

    <main class="flex-1 pt-28 md:pt-32">
      <section class="py-16 px-4">
        <div class="max-w-xl mx-auto bg-white/80 backdrop-blur rounded-3xl shadow-lg p-8 space-y-6">
          <!-- Back Button -->
          <a href="/account/start" class="inline-flex items-center gap-2 text-foreground/70 hover:text-primary mb-4 text-sm transition-colors">
            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
            Back
          </a>

          <h1 class="text-3xl md:text-4xl font-serif text-ella-deep mb-2">
            Create your password
          </h1>
          <p class="text-gray-600 mb-4">
            Set a secure password for your Ella Rises participant account.
          </p>

          <% if (error) { %>
            <div class="rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 mb-4">
              <%= error %>
            </div>
          <% } %>

          <% if (token) { %>
            <form method="POST" action="/account/create-password" class="space-y-4">
              <input type="hidden" name="token" value="<%= token %>" />

              <div>
                <label for="password" class="block text-sm font-medium text-gray-700">
                  New password
                </label>
                <input
                  type="password"
                  id="password"
                  name="password"
                  required
                  minlength="8"
                  class="mt-1 w-full px-4 py-2 rounded-2xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-ella-accent"
                />
                <p class="text-xs text-gray-500 mt-1">
                  Minimum 8 characters. Use a mix of letters, numbers, and symbols for extra security.
                </p>
              </div>

              <div>
                <label for="confirmPassword" class="block text-sm font-medium text-gray-700">
                  Confirm password
                </label>
                <input
                  type="password"
                  id="confirmPassword"
                  name="confirmPassword"
                  required
                  minlength="8"
                  class="mt-1 w-full px-4 py-2 rounded-2xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-ella-accent"
                />
              </div>

              <button
                type="submit"
                class="inline-flex items-center justify-center px-6 py-3 rounded-full bg-ella-accent text-white font-semibold shadow hover:bg-ella-accent/90 transition"
              >
                Save password and go to dashboard
              </button>
            </form>
          <% } else { %>
            <p class="text-gray-600 mb-6">
              This link is not valid anymore. Please request a new email from the Ella Rises portal.
            </p>
            <a href="/account/start" class="inline-flex items-center px-5 py-2.5 rounded-full bg-ella-accent text-white font-semibold hover:bg-ella-accent/90">
              Request a new link
            </a>
          <% } %>
        </div>
      </section>
    </main>

    <%- include('../partials/footer') %>
    <%- include('../partials/footer-scripts') %>
  </body>
</html>


